/*!
 * SATS (www.wisdmlabs.com)
 * Copyright 2019 SATS
 * Licensed under the http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
/*!
 * remark (http://getbootstrapadmin.com/remark)
 * Copyright 2019 amazingsurge
 * Licensed under the Themeforest Standard Licenses
 */

define(["jquery","./tether","./babel-external-helpers","./breakpoints"],function(jQuery,Tether,babelHelpers,breakpoints){function getRotation(){return 1==rotate?(rotate=0,90):(rotate=1,0)}window.jQuery=jQuery,window.Tether=Tether,window.babelHelpers=babelHelpers,require(["theme_tilemmetry/bootstrap","theme_tilemmetry/jquery-mousewheel","theme_tilemmetry/jquery-asScrollbar","theme_tilemmetry/jquery-asScrollable","theme_tilemmetry/jquery-asHoverScroll","theme_tilemmetry/screenfull","theme_tilemmetry/jquery-slidePanel","theme_tilemmetry/State","theme_tilemmetry/Base","theme_tilemmetry/Plugin","theme_tilemmetry/Config","theme_tilemmetry/Menubar","theme_tilemmetry/Sidebar","theme_tilemmetry/PageAside","theme_tilemmetry/menu","theme_tilemmetry/asscrollable","theme_tilemmetry/slidepanel","theme_tilemmetry/skintools","core/str","theme_tilemmetry/Tilemmetry"],function(BS,mw,asb,asbl,ahs,sfl,spnl,State,Base,Plugin,Config,Menubar,Sidebar,PageAside,menu,Scrollable,SlidePanel,skintools,str,Tilemmetry){function togglePinAside(){jQuery("body").hasClass("pinaside")?(jQuery("body").removeClass("pinmargin"),jQuery("body").removeClass("pinaside"),jQuery(".page-aside").removeClass("opencustom"),$(".sidebar-unpinned").fadeIn("slow"),setTimeout(function(){$(".sidebar-unpinned").fadeOut("slow")},1500),$(".page-aside-pin i").prop("title",strings[0]),M.util.set_user_preference("pin_aside","")):(jQuery("body").addClass("pinaside"),jQuery(".page-aside").addClass("opencustom"),$(".sidebar-pinned").fadeIn("slow"),setTimeout(function(){$(".sidebar-pinned").fadeOut("slow")},1500),$(".page-aside-pin i").prop("title",strings[1]),M.util.set_user_preference("pin_aside","pinaside")),jQuery(window).trigger("resize")}function chatMessageAjax(otheruserid){jQuery.ajax({type:"GET",async:!0,url:M.cfg.wwwroot+"/theme/tilemmetry/request_handler.php?action=get_data_for_messagearea_messages_ajax&otheruserid="+otheruserid,success:function(response){1==response.isonline?jQuery("div#conversation div.conversation-header a.conversation-more i").addClass("green-600"):jQuery("div#conversation div.conversation-header a.conversation-more i").removeClass("green-600"),jQuery("div#conversation div.conversation-header div.conversation-title").html(response.otheruserfullname),jQuery("div#conversation div.conversation-header div.conversation-title").data("id",otheruserid),jQuery("div#conversation div.chats").empty();var child='<small class="d-block text-center sticky-top  py-5"><a href="'+M.cfg.wwwroot+"/message/index.php?user="+response.currentuserid+"&id="+otheruserid+'" class="text-muted">View All Messages</a></small>';jQuery.each(response.messages,function(index,value){"right"==value.position?child+='<div class="chat"><div class="chat-body mr-0"><div class="chat-content mr-0">':child+='<div class="chat chat-left"><div class="chat-body ml-0"><div class="chat-content ml-0">',child+=value.text+'<time class="chat-time" datetime="'+Date(value.timecreated)+'">'+value.timesent+"</time></div></div></div>"}),jQuery("div#conversation div.chats").append(child)},error:function(xhr,status,error){}})}function sendMessageNotification(x){jQuery("div#conversation div.conversation-reply input").val(""),"success"!=x&&(jQuery("div#conversation #message_response").removeClass("alert-success"),jQuery("div#conversation #message_response").addClass("alert-danger"),jQuery("div#conversation #message_response").html(jQuery("div#conversation input#messagenotsent").val())),jQuery("div#conversation #message_response").show(),jQuery("div#conversation #message_response").delay(3e3).fadeOut("slow")}Tilemmetry.run();var strings=[];str.get_strings([{key:"pinsidebar",component:"theme_tilemmetry"},{key:"unpinsidebar",component:"theme_tilemmetry"}]).done(function(s){strings=s}),jQuery(".page-aside-pin").click(function(){togglePinAside()}),jQuery(".page-aside-switch-lg .wb-chevron-left").click(function(){jQuery(".page-aside").hasClass("opencustom")||(jQuery(".page-aside").addClass("opencustom"),jQuery("body").removeClass("pinmargin")),jQuery(window).trigger("resize")}),jQuery(document.body).on("click",function(evt){if(0===evt.button&&jQuery(".page-aside").hasClass("opencustom")&&!jQuery("body").hasClass("pinaside")){var target=evt.target;target!==evt.currentTarget&&jQuery(target).closest(".page-aside, .page-aside-pin, .modal, .alertify, .-handled-lick").length||(jQuery(".page-aside").removeClass("opencustom"),jQuery("body").addClass("pinmargin"),jQuery(window).trigger("resize"))}}),jQuery(".page-login-main .fcontainer .form-group").each(function(index){var label=jQuery.trim(jQuery(".col-form-label",this).text());jQuery(".felement input",this).attr("placeholder",label)}),jQuery(document).on("click","div.site-sidebar-tab-content #sidebar-userlist a.list-group-item",function(){chatMessageAjax(jQuery(this).data("otheruserid"))}),jQuery(document).on("click","div#conversation div.conversation-reply a.sidebar-send-message",function(){event.preventDefault();var contactid=jQuery("div#conversation div.conversation-header div.conversation-title").data("id"),message=jQuery.trim(jQuery("div#conversation div.conversation-reply input").val());jQuery.ajax({type:"GET",async:!0,url:M.cfg.wwwroot+"/theme/tilemmetry/request_handler.php?action=send_quickmessage_ajax&contactid="+contactid+"&message="+message,success:function(response){"success"===jQuery.trim(response)?(sendMessageNotification("success"),chatMessageAjax(contactid)):sendMessageNotification("fail")},error:function(xhr,status,error){sendMessageNotification("error")}})}),jQuery(document).on("click","button.navbar-toggler.collapsed",function(){window.dispatchEvent(new Event("resize"))})}),jQuery("#id_s_theme_tilemmetry_courseperpage").change(function(){this.form.submit(),window.onbeforeunload=null}),jQuery("#id_s_theme_tilemmetry_logoorsitename").change(function(){this.form.submit(),window.onbeforeunload=null}),jQuery("#id_s_theme_tilemmetry_fontselect").change(function(){this.form.submit(),window.onbeforeunload=null}),jQuery("#id_s_theme_tilemmetry_frontpageimagecontent").change(function(){this.form.submit(),window.onbeforeunload=null}),jQuery("#id_s_theme_tilemmetry_contenttype").change(function(){this.form.submit(),window.onbeforeunload=null}),jQuery("#id_s_theme_tilemmetry_sliderautoplay").change(function(){this.form.submit(),window.onbeforeunload=null}),jQuery("#id_s_theme_tilemmetry_slidercount").change(function(){this.form.submit(),window.onbeforeunload=null}),jQuery("#id_s_theme_tilemmetry_enablefrontpagecourseimg").change(function(){this.form.submit(),window.onbeforeunload=null}),jQuery("#id_s_theme_tilemmetry_enablesectionbutton").change(function(){this.form.submit(),window.onbeforeunload=null}),jQuery("#id_s_theme_tilemmetry_enablefrontpageaboutus").change(function(){this.form.submit(),window.onbeforeunload=null}),jQuery("#id_s_theme_tilemmetry_navlogin_popup").change(function(){this.form.submit(),window.onbeforeunload=null});var rotate=1;jQuery(".site-menu-toggle").click(function(event){return event.preventDefault(),jQuery(".collapse").toggleClass("show"),jQuery(".site-menu-toggle i").animate({borderSpacing:getRotation()},{step:function(now){jQuery(this).css("-webkit-transform","rotate("+now+"deg)"),jQuery(this).css("-moz-transform","rotate("+now+"deg)"),jQuery(this).css("transform","rotate("+now+"deg)")},duration:200}),!1}),jQuery("body").on("click","#toggleMenubar a",function(){jQuery(".hidable").hasClass("show")&&jQuery(".hidable").toggleClass("d-none")}),jQuery("#gotop").click(function(){return jQuery("html, body").animate({scrollTop:0},jQuery(window).scrollTop()/6),!1}),jQuery(window).scroll(function(){jQuery(this).scrollTop()>300?jQuery(".to-top").css("display","flex"):jQuery(".to-top").css("display","none")}),jQuery("#page-admin-tool-lp-editcompetencyframework #id_scaleconfigbutton").click(function(e){e.preventDefault()})});